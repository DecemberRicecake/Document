| **分类** | **场景**                                         | **mysql**                                                       | **sql server**                                                  | **MongoDB**                                                      |
| ---- | -------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 增   | 插入一条数据                                 | insert into 表名 ( field1,   field2,...)  values  ( value1, value2,... ) | 同mysql                                                      | db.col.insert({'key1': 'value1',   'key1': 'value2'})        |
| 删   | 删除数据                                     | delete from 表名 where id=23                                 | 同mysql                                                      | db.col.remove({'id': '23'})                                  |
| 删   | 清除表内数据，保存表结构                     | truncate table 表名                                          | 同mysql                                                      | db.col.remove({})                                            |
| 改   | 修改字段                                     | update 表名 set field1='XXX', field2='YYY'  where id=33      | 同mysql                                                      | db.col.update({'id': '33'},{$set:{'field1': 'XXX', 'field2':   'YYY'}},{multi:true}) |
| 查   | 查看所有字段                                 | select * from 表名                                           | 同mysql                                                      | db.col.find().pretty()                                       |
| 查   | 查看多个字段                                 | select A,B from 表名                                         | 同mysql                                                      | db.col.find({}, {'A':1,'B':1}).pretty()                      |
| 查   | 查看不同的行                                 | select distinct A from 表名 where B=C                        | 同mysql                                                      | db.col.distinct('A',{'B':'C'})                               |
| 查   | 查看前3行                                    | select * from 表名 limit 3                                   | select top 3 * from 表名                                     | db.col.find().pretty().limit(3)                              |
| 查   | 查看6-15行                                   | select * from 表名 limit 5,10                                | 不支持，需要自己写                                           | db.col.find().pretty().skip(5).limit(10)                     |
| 查   | 升序（按id）                                 | select * from 表名 order by id asc                           | 同mysql                                                      | db.col.find().sort({'id':1})                                 |
| 查   | 降序（按id）                                 | select * from 表名 order by id desc                          | 同mysql                                                      | db.col.find().sort({'id':-1})                                |
| 查   | 等于（id）                                   | select * from 表名 where id=2                                | 同mysql                                                      | db.col.find({'id':2}).pretty()                               |
| 查   | 不等于                                       | select * from 表名 where id!=2                               | 同mysql                                                      | db.col.find({'id':{$ne:2}}).pretty()                         |
| 查   | 大于（id）                                   | select * from 表名 where id>2                                | 同mysql                                                      | db.col.find({'id':{$gt:2}}).pretty()                         |
| 查   | 小于（id）                                   | select * from 表名 where id<2                                | 同mysql                                                      | db.col.find({'id':{$lt:2}}).pretty()                         |
| 查   | 大于等于                                     | select * from 表名 where id>=2                               | 同mysql                                                      | db.col.find({'id':{$gte:2}}).pretty()                        |
| 查   | 小于等于                                     | select * from 表名 where id<=2                               | 同mysql                                                      | db.col.find({'id':{$lte:2}}).pretty()                        |
| 查   | 区间（id）                                   | select * from 表名 where id between 2 and 4                  | 同mysql                                                      | db.col.find({'id':{$gte:2, $lte:4}}).pretty()                |
| 查   | 不为空（不能用!=）                           | select * from 表名 where name is not null                    | 同mysql                                                      | db.col.find({'id':{$ne:null}});                              |
| 查   | 等于空（不能用=）                            | select * from 表名 where name is null                        | 同mysql                                                      | db.col.find({'id':null})                                     |
| 查   | 加                                           | select field1+field2 as field_new from 表名                  | 同mysql                                                      | db.col.aggregate([{ $project: { field_old: 1, field_new: {   $add: [ '$field1', '$field2' ] } } }]) |
| 查   | 减                                           | select field1-1 as field_new from 表名                       | 同mysql                                                      | db.col.aggregate([{ $project: { field_old: 1, field_new: {   $subtract: [ '$field1', '$field2' ] } } }]) |
| 查   | 乘                                           | select a.price*b.number as   totalprice from a ,b where a.id=b.id | 同mysql                                                      | db.col.aggregate([{ $project: { field_old: 1, field_new: {   $multiply: [ '$field1', '$field2' ] } } }]) |
| 查   | 除                                           | select field1/field2 as   field_new from 表名                | select cast(field1 as float)   /field2 from 表名             | db.col.aggregate([{ $project: { field_old: 1, field_new: {   $divide: [ '$field1', '$field2' ] } } }]) |
| 查   | 且                                           | select * from 表名 where status=1 and price<10               | 同mysql                                                      | db.col.find({'status':1, 'price':{$lt:10}}).pretty()         |
| 查   | 或                                           | select * from 表名 where status=1 or price<10                | 同mysql                                                      | db.col.find({$or:   [{"status":1},{"price":{$lt:10}}]}).pretty() |
| 查   | 在集合内                                     | select * from 表名 where groupid in(1,7)                     | 同mysql                                                      | db.col.find({'groupid':{$in:[1,7]}})                         |
| 查   | 不在集合内                                   | select * from 表名 where groupid not in(1,7)                 | 同mysql                                                      | db.col.find({'groupid':{$nin:[1,7]}})                        |
| 查   | 模糊匹配字符串（any）                        | select * from 表名 where prd_name like '%any%'               | 同mysql                                                      | db.col.find({"prd_name":/any/})                              |
| 查   | 现在时间                                     | select now()                                                 | select getdate()                                             | Date()                                                       |
| 查   | 1天后                                        | select date_add(now(), interval 1 day)                       | select dateadd(dd,1,getdate())                               | db.col.aggregate([{$project: {add_date: {$add: [ new Date(),   24*60*60*1000 ]}}}]) |
| 查   | 2小时前                                      | select date_add(now(), interval -2 hour)                     | select dateadd(hh,-2,getdate())                              | db.col.aggregate([{$project: {sub_date: {$subtract: [ new   Date(), 2*60*60*1000 ]}}}]) |
| 查   | 时间间隔（mysql只返回天数，mongodb返回毫秒） | select datediff(now(), '2019-04-01 16:00:00')                | select datediff(hh,getdate(),'2018-11-13 19:28:44')          | db.col.aggregate([{$project: {dateDiff: {$subtract: [   '$createtime', ISODate('2019-04-03T03:28:58.755Z") ]}}}]) |
| 查   | 月统计                                       | select date_format(createtime, '%Y-%m') as yue, sum(number) as   totalnum from 表名 group by yue | select year(createtime), month(createtime), sum(createuser) as   totalnum from 表名 group by    year(createtime), month(createtime) | db.col.aggregate([{$group: {_id:{ $dateToString: { format:   "%Y-%m", date: "$createtime" } },   totalnum:{$sum:'$number'}}}]) |
| 查   | 字符串拼接（其他类型需要转类型）             | select concat(field1, field2, field3) as newfield from 表名  | select field1+field2+field3    as newfield from 表名         | db.col.aggregate([{$project: { newfield: { $concat:   ['$field1', '$field2', '$field3']}}}]) |
| 查   | 计数                                         | select count(*) as 计数 from 表名 where name = 'abc'         | 同mysql                                                      | db.col.count({'name':'abc'})                                 |
| 查   | 最大值                                       | select max(price) from products                              | 同mysql                                                      | db.col.aggregate([{$group: {_id:'max',   max_value:{$max:'$price'}}}]) |
| 查   | 最小值                                       | select min(price) from products                              | 同mysql                                                      | db.col.aggregate([{$group: {_id:'min',  min_value:{$min:'$price'}}}]) |
| 查   | 求和                                         | select sum(price) as 总价 from order where order_id=5555     | 同mysql                                                      | db.col.aggregate([{$group: {_id:'sum',   sum_value:{$sum:'$price'}}}]) |
| 查   | 分组前后，加条件                             | select time, sum(number) as totalnum from 表名 where name = '西瓜'   group by time having sum(number)>200 | 同mysql                                                      | db.col.aggregate([{$match:{'name':'西瓜'}},   {$group:{_id:'$time', totalnum:{$sum:'$number'}}},   {$match:{totalnum:{$gt:200}}}]) |
| 查   | 自定义别名                                   | select A1 as A2 from 表名                                    | 同mysql                                                      | db.col.aggregate([{$project: {'A2':'$A1'}}])                 |
| 查   | 内连接（交集）                               | select * from a_table a inner join b_table b on a.name =   b.name | 同mysql                                                      | db.a_table.aggregate([{$lookup:{from:'b_table',localField:'name',foreignField:'name',as:   'temp_table'}},{$unwind: "$temp_table"}]) |
| 查   | 左连接（以左表维度）                         | select * from a_table a left join b_table b on a.name = b.name | 同mysql                                                      | db.a_table.aggregate([{$lookup:{from:'b_table',localField:'name',foreignField:'name',as:   'temp_table'}}]) |
| 查   | 右连接（以右表维度）                         | select * from a_table a right join b_table b on a.name =   b.name | 同mysql                                                      | mongodb不涉及                                                |
| 查   | 全连接（并集）                               | mysql不支持全连接                                            | select * from a_table a full join b_table b on a.name = b.name | mongodb不涉及                                                |
| 其他 | 查看系统内所有数据库                         | show databases                                               | select name from sys.databases                               | show dbs（需要管理员权限）                                   |
| 其他 | 查看某个数据库中的所有的表                   | show tables                                                  | select name from sysobjects where xtype= 'U'                 | show collections                                             |
| 其他 | 使用某一个数据库                             | use 库名                                                     | 同mysql                                                      | 同mysql                                                      |
| 其他 | 查看表中字段的注释                           | show full fields from 表名                                   | select      A.name AS table_name,      B.name AS column_name,      C.value AS column_description      from sys.tables A      inner join sys.columns B on B.object_id = A.object_id      left join sys.extended_properties C on C.major_id = B.object_id and   C.minor_id = B.column_id      where A.name = '表名' | mongodb不涉及                                                |
| 其他 | 定义变量                                     | set @a=1;      set @b='小红';      select * from 表名 where id=@a;      select * from 表名 where name=@b; | declare @a int;      declare @b nvarchar(1000);      set @a=1;      set @b='小红';      select * from 表名 where id=@a;      select * from 表名 where name=@b; | $a = 1      $b = '小红'      db.col.find({’id‘: $a})      db.col.find({’name‘: $b}) |
| 其他 | 位置顺序                                     | select>from>where>group by>having>order   by>limit           | select>top>from>where>group by>having>order   by             | mongodb不涉及                                                |